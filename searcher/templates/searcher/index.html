{% extends 'base.html' %}

{% load static %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{% static "searcher/style.css" %}">
{% endblock %}

{% block body %}
	<form action="" method="post">
		<div class="input-group">
			{% csrf_token %}
			{{ form.query }}
			<span class="input-group-btn">
				<input class="btn btn-primary" type="submit" value="Search" />
			</span>
		</div>
	</form>

	<br/>

	{% for entry in paginated_matching_entries %}
		<div class="form-control bg-faded">
			{% if matches_all_entries %}
				<h5>{{ entry.jp_text }}</h5>
				<h6>{{ entry.en_text }}</h6>
			{% else %}
				<h5>
				{% for highlight, text in entry.jp_text_highlighted %}{% if highlight %}<b>{% endif %}{{ text }}{% if highlight %}</b>{% endif %}{% endfor %}
				</h5>
				<h6>
				{% for highlight, text in entry.en_text_highlighted %}{% if highlight %}<b>{% endif %}{{ text }}{% if highlight %}</b>{% endif %}{% endfor %}
				</h6>
			{% endif %}

			<div class="clearfix">
				{% for label in entry.meta_labels %}
					<span class="badge badge-primary">{{ label }}</span>
				{% endfor %}

				<a class="btn float-right share-button" data-toggle="collapse" href="#share-{{ entry.id }}">
					<img src="{% static "images/share.png" %}" alt="Share"/>
				</a>
			</div>

			<div id="share-{{ entry.id }}" class="collapse">
				<div class="input-group">
					<span class="input-group-addon">URL</span>
					<input type="text" class="form-control" value="https://localhost:8000/?id=10343" readonly>
				</div>
			</div>
		</div>
		<hr/>
	{% endfor %}

	<br/>

	<div class="float-left">
		{% if paginated_matching_entries.has_previous %}
			<a class="btn btn-secondary" href='?query={{ request.GET.query }}&page={{ paginated_matching_entries.previous_page_number}}'>Previous</a>
		{% endif %}
	</div>
	<div class="float-right">
		{% if paginated_matching_entries.has_next %}
			<a class="btn btn-secondary" href='?query={{ request.GET.query }}&page={{ paginated_matching_entries.next_page_number}}'>Next</a>
		{% endif %}
	</div>
{% endblock %}
